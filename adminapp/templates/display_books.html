<!DOCTYPE html>
{% extends 'index.html' %}
{% block content %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>View All Books</title>
</head>
<body>

<h1>Welcome to View All Books</h1>

<div class="card">
  <div class="card-body">
    <h4 class="card-title">Books List</h4>
    <p class="card-description"> Manage your added books below </p>

    <div class="table-responsive">
      <table class="table table-dark">
        <thead>
          <tr>
            <th>#</th>
            <th>Title</th>
            <th>Author</th>
            <th>Category</th>
            <th>Price</th>
            <th>Publisher</th>
            <th>Description</th>
            <th>Cover Image</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody>
          {% for book in data %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ book.book_title }}</td>
            <td>{{ book.book_author }}</td>
            <td>{{ book.book_category }}</td>
            <td>{{ book.book_price }}</td>
            <td>{{ book.book_publisher }}</td>
            <td style="max-width: 200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
              {{ book.book_description }}
            </td>
            <td>
              {% if book.book_cover_image %}
                <img src="{{ book.book_cover_image.url }}" alt="cover" width="60" height="60" style="object-fit: cover; border-radius: 6px;">
              {% else %}
                <span class="text-muted">No Image</span>
              {% endif %}
            </td>
            <td>
              <a href="{% url 'edit_books' book_id=book.id %}" class="btn btn-sm btn-primary">Edit</a>
              <a href="{% url 'delete_books' b_id=book.id %}" class="btn btn-sm btn-danger"
                 onclick="return confirm('Are you sure you want to delete this book?');">
                Delete
              </a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="9" class="text-center text-muted">No books added yet</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

</body>
</html>
{% endblock %}
